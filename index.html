<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Projector Clock - Admin Mode</title>
    
    <!-- Load Font Keren -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;500;700&family=Orbitron:wght@400;700&family=Roboto+Mono:wght@400;700&family=Lora:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    
    <style>
        /* =========================================
           KONFIGURASI CSS VARIABLE (DINAMIS)
           ========================================= */
        :root {
            /* Warna & Tampilan */
            --bg-color: #000000;
            --text-color: #ffffff;
            --shadow-color: rgba(0,0,0,0.5);
            --shadow-blur: 0px;
            
            /* Tipografi */
            --font-family: 'Rubik', sans-serif;
            --clock-size: 25vw;
            --clock-weight: 700;
            --letter-spacing: -5px;
            
            /* Info Tambahan */
            --date-size: 2vw;
            --date-color: #aaaaaa;
            --date-display: none; /* block/none */
            
            /* Running Text */
            --marquee-size: 3vw;
            --marquee-color: #ffcc00;
            --marquee-bg: #111111;
            --marquee-display: none; /* flex/none */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-family);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: background 0.3s;
        }

        /* =========================================
           KOMPONEN JAM UTAMA
           ========================================= */
        .clock-container {
            text-align: center;
            z-index: 5;
            position: relative;
        }

        #clock {
            font-size: var(--clock-size);
            font-weight: var(--clock-weight);
            letter-spacing: var(--letter-spacing);
            text-shadow: 4px 4px var(--shadow-blur) var(--shadow-color);
            line-height: 1;
            font-variant-numeric: tabular-nums;
            white-space: nowrap;
        }

        /* Animasi Berkedip pada Titik Dua (:) */
        .blink-animation {
            animation: blinker 1s linear infinite;
        }
        @keyframes blinker {
            50% { opacity: 0; }
        }

        #date-display {
            font-size: var(--date-size);
            color: var(--date-color);
            margin-top: 10px;
            font-weight: 300;
            display: var(--date-display);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* =========================================
           RUNNING TEXT (MARQUEE)
           ========================================= */
        .marquee-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--marquee-bg);
            color: var(--marquee-color);
            font-size: var(--marquee-size);
            padding: 10px 0;
            white-space: nowrap;
            overflow: hidden;
            display: var(--marquee-display);
            z-index: 10;
        }

        .marquee-content {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 20s linear infinite;
        }

        @keyframes marquee {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }

        /* =========================================
           TOMBOL ADMIN TERSEMBUNYI
           ========================================= */
        .admin-trigger {
            position: fixed;
            top: 0;
            right: 0;
            width: 50px;
            height: 50px;
            z-index: 999;
            cursor: pointer;
            opacity: 0; /* Tidak terlihat tapi bisa diklik */
        }
        
        /* Hint saat hover agar admin tau posisinya */
        .admin-trigger:hover {
            background: rgba(255,255,255,0.1); 
            opacity: 1;
        }

        /* =========================================
           ADMIN DASHBOARD (MODAL)
           ========================================= */
        #admin-panel {
            display: none; /* Hidden default */
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
            font-family: 'Segoe UI', sans-serif; /* Font UI standar untuk admin */
            color: #fff;
        }

        .panel-content {
            max-width: 800px;
            margin: 0 auto;
            background: #1e1e1e;
            padding: 30px;
            border-radius: 10px;
            border: 1px solid #333;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
        }

        .close-btn {
            background: #ff4444;
            border: none;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        /* Grid Layout untuk Controls */
        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-group {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
        }

        .control-group h4 {
            color: #aaa;
            margin-bottom: 10px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid #444;
            padding-bottom: 5px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.85rem;
            color: #ddd;
        }

        input[type="range"], input[type="text"], select, input[type="color"] {
            width: 100%;
            margin-bottom: 10px;
            background: #333;
            border: 1px solid #555;
            color: white;
            padding: 8px;
            border-radius: 4px;
        }
        
        input[type="color"] {
            height: 40px;
            padding: 2px;
        }

        input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .btn-primary { background: #007bff; color: white; }
        .btn-warning { background: #ffbb00; color: black; }
        
        /* Tombol Fullscreen di pojok kiri bawah (kecil) */
        .fs-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            opacity: 0.1;
            background: white;
            width: 40px; 
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
        }
        .fs-btn:hover { opacity: 0.8; }

    </style>
</head>
<body>

    <!-- TRIGGER ADMIN (Pojok Kanan Atas - Klik 3x Cepat atau Tahan Lama) -->
    <div class="admin-trigger" id="admin-trigger" title="Klik 3x untuk Admin">‚öôÔ∏è</div>

    <!-- UTAMA: JAM & TANGGAL -->
    <div class="clock-container">
        <div id="clock">
            <span id="h">00</span><span class="sep">:</span><span id="m">00</span><span class="sep">:</span><span id="s">00</span>
        </div>
        <div id="date-display">Senin, 1 Januari 2026</div>
    </div>

    <!-- RUNNING TEXT -->
    <div class="marquee-container" id="marquee-wrap">
        <div class="marquee-content" id="marquee-text">Selamat Datang di Masjid Agung - Mohon HP di-silent selama ibadah.</div>
    </div>

    <!-- TOMBOL FULLSCREEN -->
    <button class="fs-btn" onclick="toggleFullscreen()"></button>


    <!-- =========================================
         ADMIN PANEL (HIDDEN)
         ========================================= -->
    <div id="admin-panel">
        <div class="panel-content">
            <div class="panel-header">
                <h2>üéõÔ∏è Control Center</h2>
                <button class="close-btn" onclick="closeAdmin()">TUTUP (ESC)</button>
            </div>

            <!-- TAB 1: TAMPILAN UTAMA -->
            <div class="control-grid">
                <div class="control-group">
                    <h4>Warna & Latar</h4>
                    <label>Background Color</label>
                    <input type="color" id="inp-bg-color" oninput="updateConfig('bgColor', this.value)">
                    
                    <label>Text Color</label>
                    <input type="color" id="inp-text-color" oninput="updateConfig('textColor', this.value)">
                    
                    <label>Shadow Color</label>
                    <input type="color" id="inp-shadow-color" oninput="updateConfig('shadowColor', this.value)">
                </div>

                <div class="control-group">
                    <h4>Tipografi Jam</h4>
                    <label>Jenis Font</label>
                    <select id="inp-font" onchange="updateConfig('fontFamily', this.value)">
                        <option value="'Rubik', sans-serif">Rubik (Modern)</option>
                        <option value="'Orbitron', sans-serif">Orbitron (Digital/Sci-Fi)</option>
                        <option value="'Roboto Mono', monospace">Mono (Koding)</option>
                        <option value="'Lora', serif">Lora (Elegan)</option>
                    </select>

                    <label>Ukuran Jam</label>
                    <input type="range" min="10" max="40" id="inp-size" oninput="updateConfig('clockSize', this.value)">
                    
                    <label>Ketebalan (Bold)</label>
                    <input type="range" min="100" max="900" step="100" id="inp-weight" oninput="updateConfig('clockWeight', this.value)">
                </div>

                <div class="control-group">
                    <h4>Detail Jam</h4>
                    <label>Spasi Huruf</label>
                    <input type="range" min="-20" max="20" id="inp-spacing" oninput="updateConfig('letterSpacing', this.value)">
                    
                    <label>Efek Blur Bayangan</label>
                    <input type="range" min="0" max="50" id="inp-blur" oninput="updateConfig('shadowBlur', this.value)">

                    <label style="margin-top: 10px;">
                        <input type="checkbox" id="inp-blink" onchange="updateConfig('blinkSep', this.checked)">
                        Titik Dua Kedip
                    </label>
                    
                    <label>
                        <input type="checkbox" id="inp-seconds" onchange="updateConfig('showSeconds', this.checked)">
                        Tampilkan Detik
                    </label>
                </div>
            </div>

            <!-- TAB 2: TANGGAL & INFO -->
            <div class="control-grid">
                <div class="control-group">
                    <h4>Tanggal</h4>
                    <label>
                        <input type="checkbox" id="inp-show-date" onchange="updateConfig('showDate', this.checked)">
                        Tampilkan Tanggal
                    </label>
                    
                    <label>Ukuran Tanggal</label>
                    <input type="range" min="1" max="10" step="0.5" id="inp-date-size" oninput="updateConfig('dateSize', this.value)">
                    
                    <label>Warna Tanggal</label>
                    <input type="color" id="inp-date-color" oninput="updateConfig('dateColor', this.value)">
                </div>

                <div class="control-group" style="grid-column: span 2;">
                    <h4>Running Text (Pengumuman)</h4>
                    <label>
                        <input type="checkbox" id="inp-show-marquee" onchange="updateConfig('showMarquee', this.checked)">
                        Aktifkan Running Text
                    </label>

                    <label>Isi Pesan</label>
                    <input type="text" id="inp-marquee-text" placeholder="Ketik pengumuman..." oninput="updateConfig('marqueeText', this.value)">
                    
                    <div style="display:flex; gap:10px;">
                        <div style="flex:1">
                            <label>Warna Teks</label>
                            <input type="color" id="inp-marquee-color" oninput="updateConfig('marqueeColor', this.value)">
                        </div>
                        <div style="flex:1">
                            <label>Background Bar</label>
                            <input type="color" id="inp-marquee-bg" oninput="updateConfig('marqueeBg', this.value)">
                        </div>
                    </div>
                </div>
            </div>

            <!-- SYSTEM -->
            <div class="action-buttons">
                <button class="btn btn-warning" onclick="resetConfig()">‚ôªÔ∏è Reset Default</button>
                <button class="btn btn-primary" onclick="saveAndClose()">üíæ Simpan Permanen</button>
            </div>
            <p style="margin-top:10px; font-size:0.8rem; color:#666;">*Pengaturan disimpan di LocalStorage browser ini.</p>
        </div>
    </div>

    <script>
        /* =========================================
           STATE MANAGEMENT
           ========================================= */
        const defaultConfig = {
            bgColor: '#000000',
            textColor: '#ffffff',
            shadowColor: '#000000',
            shadowBlur: 0,
            
            fontFamily: "'Rubik', sans-serif",
            clockSize: 25, // vw
            clockWeight: 700,
            letterSpacing: -5,
            blinkSep: false,
            showSeconds: true,
            
            showDate: false,
            dateSize: 2, // vw
            dateColor: '#aaaaaa',
            
            showMarquee: false,
            marqueeText: "Selamat Datang - Silakan Edit Pesan Ini Di Admin Panel",
            marqueeColor: "#ffcc00",
            marqueeBg: "#111111"
        };

        let config = {...defaultConfig};

        // Load Config on Start
        function loadConfig() {
            const saved = localStorage.getItem('clockConfig');
            if (saved) {
                config = {...config, ...JSON.parse(saved)};
            }
            applyConfigToDOM();
            syncInputs();
        }

        function saveConfig() {
            localStorage.setItem('clockConfig', JSON.stringify(config));
        }

        function resetConfig() {
            if(confirm("Kembalikan ke pengaturan awal?")) {
                config = {...defaultConfig};
                saveConfig();
                loadConfig();
            }
        }

        /* =========================================
           DOM MANIPULATION
           ========================================= */
        function applyConfigToDOM() {
            const root = document.documentElement.style;
            
            // Tampilan Utama
            root.setProperty('--bg-color', config.bgColor);
            root.setProperty('--text-color', config.textColor);
            root.setProperty('--shadow-color', config.shadowColor);
            root.setProperty('--shadow-blur', config.shadowBlur + 'px');
            
            root.setProperty('--font-family', config.fontFamily);
            root.setProperty('--clock-size', config.clockSize + 'vw');
            root.setProperty('--clock-weight', config.clockWeight);
            root.setProperty('--letter-spacing', config.letterSpacing + 'px');

            // Date
            root.setProperty('--date-display', config.showDate ? 'block' : 'none');
            root.setProperty('--date-size', config.dateSize + 'vw');
            root.setProperty('--date-color', config.dateColor);

            // Marquee
            root.setProperty('--marquee-display', config.showMarquee ? 'block' : 'none');
            root.setProperty('--marquee-color', config.marqueeColor);
            root.setProperty('--marquee-bg', config.marqueeBg);
            document.getElementById('marquee-text').innerText = config.marqueeText;

            // Logika Detik
            document.getElementById('s').style.display = config.showSeconds ? 'inline' : 'none';
            // Sembunyikan separator kedua jika detik mati
            const seps = document.querySelectorAll('.sep');
            if(seps[1]) seps[1].style.display = config.showSeconds ? 'inline' : 'none';

            // Logika Kedip
            seps.forEach(el => {
                if(config.blinkSep) el.classList.add('blink-animation');
                else el.classList.remove('blink-animation');
            });
        }

        // Fungsi yang dipanggil input HTML
        function updateConfig(key, value) {
            config[key] = value;
            applyConfigToDOM();
        }

        function syncInputs() {
            document.getElementById('inp-bg-color').value = config.bgColor;
            document.getElementById('inp-text-color').value = config.textColor;
            document.getElementById('inp-shadow-color').value = config.shadowColor;
            
            document.getElementById('inp-font').value = config.fontFamily;
            document.getElementById('inp-size').value = config.clockSize;
            document.getElementById('inp-weight').value = config.clockWeight;
            document.getElementById('inp-spacing').value = config.letterSpacing;
            document.getElementById('inp-blur').value = config.shadowBlur;
            
            document.getElementById('inp-blink').checked = config.blinkSep;
            document.getElementById('inp-seconds').checked = config.showSeconds;
            
            document.getElementById('inp-show-date').checked = config.showDate;
            document.getElementById('inp-date-size').value = config.dateSize;
            document.getElementById('inp-date-color').value = config.dateColor;
            
            document.getElementById('inp-show-marquee').checked = config.showMarquee;
            document.getElementById('inp-marquee-text').value = config.marqueeText;
            document.getElementById('inp-marquee-color').value = config.marqueeColor;
            document.getElementById('inp-marquee-bg').value = config.marqueeBg;
        }

        /* =========================================
           CLOCK LOGIC
           ========================================= */
        function updateClock() {
            const now = new Date();
            document.getElementById('h').innerText = String(now.getHours()).padStart(2, '0');
            document.getElementById('m').innerText = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('s').innerText = String(now.getSeconds()).padStart(2, '0');
            
            // Update Date text only once a minute to save resource
            if(now.getSeconds() === 0) {
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('date-display').innerText = now.toLocaleDateString('id-ID', options);
            }
        }
        setInterval(updateClock, 1000);
        updateClock();
        // Init date immediately
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('date-display').innerText = new Date().toLocaleDateString('id-ID', options);


        /* =========================================
           ADMIN LOGIC
           ========================================= */
        const trigger = document.getElementById('admin-trigger');
        const modal = document.getElementById('admin-panel');
        let clickCount = 0;
        let clickTimer;

        // Klik 3x cepat
        trigger.addEventListener('click', () => {
            clickCount++;
            clearTimeout(clickTimer);
            clickTimer = setTimeout(() => clickCount = 0, 500); // Reset kalau lebih dari 0.5 detik jeda

            if (clickCount >= 3) {
                openAdmin();
                clickCount = 0;
            }
        });

        // Shortcut Keyboard: Tekan 'M' (Menu)
        document.addEventListener('keydown', (e) => {
            if (e.key.toLowerCase() === 'm' && modal.style.display !== 'block') {
                openAdmin();
            }
            if (e.key === 'Escape') {
                closeAdmin();
            }
        });

        function openAdmin() {
            const pin = prompt("Masukkan PIN Admin (Default: 1234):");
            if (pin === "1234") {
                modal.style.display = 'block';
                syncInputs(); // Pastikan input sesuai config saat ini
            } else if (pin !== null) {
                alert("PIN Salah!");
            }
        }

        function closeAdmin() {
            modal.style.display = 'none';
        }

        function saveAndClose() {
            saveConfig();
            closeAdmin();
            alert("Pengaturan tersimpan!");
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(e=>console.log(e));
            } else {
                if(document.exitFullscreen) document.exitFullscreen();
            }
        }

        // Start
        loadConfig();

    </script>
</body>
</html>


